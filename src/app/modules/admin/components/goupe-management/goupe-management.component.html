<div class="container-fluid">

  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Group Management System</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
              data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
              aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <button class="btn btn-outline-success" data-toggle="modal" data-target="#addGroup"
                (click)="init()"
                type="button">
          Add Group
        </button>
      </div>
    </div>

  </nav>


  <table class="table table-hover">
    <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Action</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let group of groupList">
      <td>{{group.name}}</td>
      <td>

        <button type="button" class="btn btn-outline-warning me-2" data-toggle="modal"
                data-target="#editGroup" (click)="editGroup(group)">Edit Group
        </button>

        <button type="button" class="btn btn-outline-primary me-2" data-toggle="modal"
                data-target="#manageUsers" (click)="manageUsers(group.id)">Edit User
        </button>


        <button type="button" class="btn btn-outline-danger" (click)="delete(group.id)">Delete</button>
      </td>


    </tr>

    </tbody>
  </table>


  <!-- Add Group modal -->
  <div class="modal fade" id="addGroup" role="dialog" tabindex="-1" aria-labelledby="exampleModalLabel"
       aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Add new User</h5>

        </div>
        <div class="modal-body">

          <form [formGroup]="groupDetail">
            <div class="mb-3">
              <label class="form-label">First Name </label>
              <input type="text" formControlName="name" class="form-control" id="name"
                     aria-describedby="emailHelp">
            </div>

            <div class="modal-footer">

              <button type="button" class="btn btn-primary" data-bs-dismiss="modal" (click)="addGroup()"
                      style="position: relative;
                                left: -48px; font-size: 21px;">Add Group
              </button>
            </div>
          </form>

        </div>

      </div>
    </div>
  </div>


  <!-- Edit Group modal -->
  <div class="modal fade" id="editGroup" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Edit User details</h5>

        </div>
        <div class="modal-body">

          <form [formGroup]="groupDetail">
            <div class="mb-3">
              <label class="form-label">First name </label>
              <input type="text" formControlName="name" class="form-control" id="name"
                     aria-describedby="emailHelp">
            </div>

            <div class="modal-footer">

              <button type="button" class="btn btn-outline-success" (click)="updateGroup()"
                      data-bs-dismiss="modal">Update
              </button>
            </div>
          </form>

        </div>
      </div>
    </div>
  </div>

  <!-- Manage Users -->
  <div class="modal fade" id="manageUsers" role="dialog" tabindex="-1" aria-labelledby="exampleModalLabel"
       aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Manage Users</h5>
        </div>
        <button (click)="addUser()">add user</button>
        <div class="modal-body">

          <table class="table table-hover">
            <thead>
            <tr>
              <th scope="col">Name</th>
              <th scope="col">Action</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let user of userList; let i = index">
              <td *ngIf="userList[i].firstName!= null">{{user.lastName}} {{user.firstName}}</td>
              <td *ngIf="!userList[i].firstName">
                    <div ngbDropdown class="d-inline-block">
                      <button type="button" class="btn btn-outline-primary" id="dropdownBasic1"
                              (click)="getAllUsers()" ngbDropdownToggle>Toggle dropdown</button>
                      <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                        <button *ngFor="let us of allUsers" (click)="selectUser(us)" ngbDropdownItem>
                          {{us.lastName}} {{us.firstName}}
                        </button>
                      </div>
                    </div>
              </td>
              <td>

                <!--<button type="button" class="btn btn-outline-primary me-2" data-toggle="modal"
                        data-target="#editUser" (click)="editUser(groupId, user)" style="margin-left: -60px;">Affect</button>-->


                <button type="button" class="btn btn-outline-danger" (click)="deleteUser(user)">Delete</button>
              </td>


            </tr>

            </tbody>
          </table>

        </div>

      </div>
    </div>
  </div>

</div>
